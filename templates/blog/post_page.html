{% extends 'blog/blogBase.html' %} 
{% load static %}

{% block content %}
<div class="post-page">
    <article class="post-content">
        <h1>{{ post.title }}</h1>
        <div class="post-meta">
            <span>Por <a href="{% url 'profile_view' post.author.username %}">{{ post.author.username }}</a></span>
            <span> | Publicado em {{ post.created_at|date:"d / m / Y" }}</span>
        </div>
        
        {% if post.image %}
        <div class="post-image">
            <img src="{{ post.image.url }}" alt="{{ post.title }}">
        </div>
        {% endif %}
        
        
        <div class="post-body">
            {{ post.content|safe }}
        </div>
        
        <div class="post-footer">
            <div class="post-category">
                <strong>Categoria: </strong>{{ post.get_category_display }}
            </div>
            <div class="post-tags">
                <strong>Tags: </strong>
                {% for tag in post.tags.all %}
                    <span>{{ tag.name }}</span>{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </div>
        </div>
    </article>

    <section class="post-comments">
        <h2>Coment√°rios ({{ post.comments.count }})</h2>
        <ul class="comment-list">
            {% for comment in post.comments.all %}
            <li class="comment-item">
                <div class="comment-author">
                    <strong>{{ comment.author.username }}</strong>
                </div>
                <div class="comment-body">
                    {{ comment.text }}
                </div>
                <div class="comment-date">
                    <small>{{ comment.created_at|date:"d / m / Y H:i" }}</small>
                </div>
            </li>
            {% endfor %}
        </ul>
    </section>
</div>
{% endblock %}
